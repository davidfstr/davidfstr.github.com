<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    
    <title>Agda: Second Impressions | DaFoster</title>
  
  
    <meta name="author" content="David Foster">
  
    
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml" />
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml" />
    
  
    <!-- Google Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-18719089-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    
    <link href="/assets/css/style.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/css/style-print.css" rel="stylesheet" type="text/css" media="print">
    
    
    
    
      <style>
        /* Remove borders and other styling from accordions with source files */
.accordion code { border: 0; }
.accordion-body pre { border: 0; margin: 0; padding: 0; background-color: inherit; }

      </style>
    

    <!-- Le fav and touch icons -->
    <!-- NOTE: Feed readers only understand favicons at the root of the site. -->
    <link rel="shortcut icon" href="/favicon.ico">
  <!-- Update these with your own images
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
    
    <!-- Le scripts -->
  
    <script src="/assets/js/jquery-1.8.3.min.js"></script>
  
  
  
    <script src="/assets/js/bootstrap.min.js"></script>
  
  
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">DaFoster</a>
          <ul class="nav">
            
              
            
              
            
              
                <li><a href="/projects/">Projects</a></li>
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
            
              
                <li><a href="/articles/">Articles</a></li>
              
            
              
            
              
                <li><a href="/about/">About</a></li>
              
            
              
            
              
            
              
            
              
            
              
            
            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="content-container">
        <div class="breadcrumb-bar">
          <ul class="breadcrumb">
            
            
            
            
              
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
                  
                
              
                
                
              
                
                
              
                
                
              
              
              <li><a href="/">Home</a> <span class="divider">&gt;</span></li>
              
            
              
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
                  
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
                
                
              
              
              <li><a href="/articles/">Articles</a> <span class="divider">&gt;</span></li>
              
            
            
            
          </ul>
        </div>
        
        <!-- Encourage IE 6 users to upgrade their browser. -->
        <!--[if lt IE 7]>
          <div style="clear: both; height: 59px; padding: 0 0 0 50px; position: relative;">
            <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
              <img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg"
                border="0" height="42" width="820"
                alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today." />
            </a>
          </div>
        <![endif]-->
        
        
          <div class="row">
  <div class="span9 content post">
    <h1>Agda: Second Impressions</h1>
    <div class="post-metadata">
      Feb 17, 2014 &ndash; Filed under: 
      <span class="tag_box inline">
        
         
          <span><a href="/articles/topics/#Software">Software <sup>49</sup></a></span>
        
      </span>
      
    </div>
    
    <p>These are my second impressions of the Agda programming language after writing (or trying to write) a few simple Agda programs.</p>

<p>If you only want the highlights, just read the <a href="#executive-summary">Executive Summary</a>. If you also want to see supporting material and notes, continue reading further.</p>

<div class="toc">
  <ul>
<li><a href="#executive-summary">Executive Summary</a></li>
<li><a href="#programs">Programs</a>

<ul>
<li><a href="#peano">Peano</a></li>
<li><a href="#hellonumber">HelloNumber</a></li>
<li><a href="#helloworld">HelloWorld</a></li>
<li><a href="#printtwothings">PrintTwoThings</a></li>
<li><a href="#echoinput">EchoInput</a></li>
<li><a href="#promptforname">PromptForName</a></li>
<li><a href="#echoinputreverse">EchoInputReverse</a></li>
<li><a href="#parseint">ParseInt</a></li>
</ul>
</li>
</ul>


</div>


<p><a id="executive-summary"></a></p>

<h2>Executive Summary</h2>

<p>Agda is simultaneously touted as (1) a dependently-typed <em>programming language</em> and (2) a proof assistant. I find that Agda is a considerably better proof assistant than it is a programming language at this time.</p>

<p>A few issues I found when trying to use Agda as a programming language to get real work done:</p>

<ul>
<li>I/O is painful:

<ul>
<li>The Agda standard library lacks any functions for reading from standard input. Clearly the ability to write basic command-line programs is not a priority for the Agda library implementors.

<ul>
<li>You must implement such functions yourself as native functions that call into Haskell.</li>
</ul>
</li>
<li>The I/O that does exist is based on Haskell&rsquo;s I/O monad, which by itself is difficult enough to learn.</li>
<li>It appears that one has to learn what <a href="http://adam.chlipala.net/cpdt/html/Coinductive.html">coinduction</a> is in order to use Agda&rsquo;s native <code>IO</code> module. Yet another abstract academic construct.

<ul>
<li><p>I can work around this by restricting myself to the <code>IO.Primitive</code> module. This module directly mirrors Haskell&rsquo;s IO system and thus only requires knowledge of monads.</p></li>
</ul>
</li>
</ul>
</li>
<li>Some basic numerical operations are very inefficient.

<ul>
<li>The <code>div</code> and <code>mod</code> operators for the default implementation of natural numbers (<code>Data.Nat</code>) run in <em>linear</em> time relative to the magnitude of the divisor.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>

<ul>
<li>Consequently it takes about <strong>16 seconds</strong> to print the number 4000 because of division inefficiency when formatting the number for display.</li>
</ul>
</li>
<li><p>At least <code>≤?</code>, <code>≟</code>, <code>+</code>, and <code>*</code> appear to be logarithmic- or constant-time.</p></li>
</ul>
</li>
<li><p>The &ldquo;Hello World&rdquo; program compiles to a 14 MB binary. Unacceptably large.</p></li>
<li><p>The &ldquo;Hello World&rdquo; program takes 3 seconds to compile. Unacceptably slow.</p></li>
<li>It takes quite a lot of effort to get a basic environment running. You have to:

<ul>
<li>Install Agda.</li>
<li>Install the Agda standard library separately.</li>
<li>Compile the Agda IO.FFI module manually.</li>
<li>Install and learn Emacs.</li>
<li>Configure Emacs to work with Agda.<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></li>
</ul>
</li>
</ul>


<h3><em>Related Articles</em></h3>

<ul>
<li><a href="/articles/2014/01/24/agda-notes-and-evaluation/">Agda: First Impressions</a>

<ul>
<li><em>Previous article in this series.</em></li>
</ul>
</li>
</ul>


<p><a id="programs"></a></p>

<h2>Programs</h2>

<p>The following are all the simple programs I&rsquo;ve written with Agda so far.</p>

<p><a id="peano"></a></p>

<h3>Peano</h3>

<p>A manual reimplementation of natural numbers (i.e. non-negative integers) just so that I can get my Agda environment up and running.<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>Peano.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module Peano where

data ℕ : Set where
  zero : ℕ
  suc : ℕ → ℕ

_+_ : ℕ → ℕ → ℕ
zero + zero  = zero
zero + n     = n
(suc n) + n' = suc (n + n')
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>I resent being forced to use Emacs as opposed to my favorite text editor.

<ul>
<li>Particularly since the installation instructions are not bulletproof.</li>
</ul>
</li>
</ul>


<p><a id="hellonumber"></a></p>

<h3>HelloNumber</h3>

<p>A program that prints the number 5.</p>

<p>No more reimplementing silly stuff like numbers. Let&rsquo;s use the standard library.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>HelloNumber.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module HelloNumber where

-- Agda standard library 0.7
open import Data.Nat
open import Data.Nat.Show using (show)
open import Data.Unit using (⊤)
open import IO
import IO.Primitive as Prim

five : ℕ
five = 5

main' : IO ⊤
main' = putStrLn (show five)

main : Prim.IO ⊤
main = run main'
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>The <a href="https://github.com/agda/agda-stdlib/">Agda standard library</a> is not installed with Agda by default. WTF?

<ul>
<li>It also has not yet reached v1.0.</li>
</ul>
</li>
<li>Standard library IO appears to be defined equivalently to Haskell&rsquo;s IO monad.</li>
<li>I am amused that compiling the IO module also implies compiling the entirety of Algebra.</li>
<li>I&rsquo;m sad that declaration order in Agda matters. In particular items must be declared before they can be used.

<ul>
<li>This forces me to write programs in the annoying bottom-to-top order, requiring lots of extra up-down eye scanning for large programs.</li>
</ul>
</li>
<li>Surprise! The main function doesn&rsquo;t have type <code>IO ⊤</code> (which would be equivalent to the Haskell <code>IO ()</code>). Instead it has type <code>Prim.IO ⊤</code> which can be obtained by passing an <code>IO ⊤</code> through the <code>IO.run</code> function.</li>
<li>Even after installing the standard library, I have to manually compile the IO.FFI library to perform basic IO. *grumble*</li>
<li>My test program that just prints the number 5 takes up 14 MB. What a waste of space&hellip;

<ul>
<li>I assume those 14 MB are primarily the bulk added by the standard library.</li>
</ul>
</li>
</ul>


<p><a id="helloworld"></a></p>

<h3>HelloWorld</h3>

<p>Now let&rsquo;s try printing strings, which should allow writing the standard &ldquo;Hello world&rdquo; program.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>HelloWorld.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module HelloWorld where

-- Agda standard library 0.7
open import Data.String
open import Data.Unit using (⊤)
open import IO
import IO.Primitive as Prim

greeting : String
greeting = "Hello World"

main' : IO ⊤
main' = putStrLn greeting

main : Prim.IO ⊤
main = run main'
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>It takes 3 seconds to type-check my Hello World program when compiling to an executable. That&rsquo;s really slow.

<ul>
<li>I hope those 3 seconds are just fixed overhead and not proportional to the size of the program.</li>
</ul>
</li>
</ul>


<p><a id="printtwothings"></a></p>

<h3>PrintTwoThings</h3>

<p>Now let&rsquo;s try stringing multiple IO actions together.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>PrintTwoThings.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module PrintTwoThings where

-- Agda standard library 0.7
open import Coinduction using (♯_)
open import Data.String
open import Data.Unit using (⊤)
open import IO
import IO.Primitive as Prim

doThis : IO ⊤
doThis = putStr "Everybody say coinductive deep embedding! "

thenThat : IO ⊤
thenThat = putStrLn "Coinductive deep embedding!"

main' : IO ⊤
main' = (♯ doThis) &gt;&gt; (♯ thenThat)

main : Prim.IO ⊤
main = run main'
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>Surprise! The <code>&gt;&gt;</code> operator used to join two IO actions isn&rsquo;t <code>IO A -&gt; IO B -&gt; IO B</code>. Rather it is <code>∞ (IO A) -&gt; ∞ (IO B) -&gt; IO B</code>.

<ul>
<li>This means I need to wrap IO actions inside the <code>∞</code> type before I can chain them together.</li>
<li>What is the <code>∞</code> type? No idea. It has something to do with &ldquo;coinduction&rdquo;, which Wikipedia failed to explain to me coherently.

<ul>
<li>Information <a href="http://people.inf.elte.hu/divip/AgdaTutorial/Revise.Coinduction.html">here</a> suggests that a <code>∞ A</code> represents a lazy unevaluated computation of type <code>A</code> that might not terminate when it is actually evaluated.</li>
<li>Representing the possibility of nontermination explicitly is probably required since Agda normally requires all of its function definitions to provably terminate.</li>
</ul>
</li>
<li>According to the <code>Coinduction</code> library, I can make a <code>∞</code> using the <code>♯</code> operator which takes a value of any type <code>A</code> and makes a <code>∞ A</code> out of it.</li>
<li>Therefore instead of <code>action1 &gt;&gt; action2</code> I need <code>♯ action1 &gt;&gt; ♯ action2</code></li>
</ul>
</li>
</ul>


<!--
#### Interlude: Agda evaluates strictly?

It appears that Agda performs strict evaluation by default. Thus the introducion of the "coinductive" type `∞` to represent potentially infinite computations.

However if this is the case then calling out to Haskell functions through the foreign function interface could get weird since Haskell *is* a lazily evaluation language.
-->


<p><a id="echoinput"></a></p>

<h3>EchoInput</h3>

<p>Read a line from standard input. Write it back to the screen.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>EchoInput.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module EchoInput where

-- Agda standard library 0.7
open import Data.String
open import Foreign.Haskell using (Unit)
open import IO.Primitive

postulate
  getLine : IO Costring

{-# COMPILED getLine getLine #-}

doThis : IO Costring
doThis = getLine

thenThat : Costring → IO Unit
thenThat = λ s → putStrLn s

main : IO Unit
main = doThis &gt;&gt;= thenThat
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>There is no function in the standard library to read from standard input. Nor is there a reference to <code>stdin</code> itself. Unbelievable.

<ul>
<li>I can <a href="http://people.inf.elte.hu/divip/AgdaTutorial/Revise.IO.html">define getLine manually</a> using the foreign function interface. But I really shouldn&rsquo;t have to define such a simple function. This should be in the standard library&hellip;</li>
</ul>
</li>
<li>When writing native IO functions it&rsquo;s a lot easier to directly use Agda&rsquo;s <code>Primitive.IO</code> module instead of the regular <code>IO</code> module. I no longer need to use <code>∞</code> or <code>♯</code> either, which is nice.</li>
</ul>


<p><a id="promptforname"></a></p>

<h3>PromptForName</h3>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>PromptForName.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module PromptForName where

-- Agda standard library 0.7
open import Data.String
open import Foreign.Haskell using (Unit)
open import IO.Primitive

postulate
  getLine : IO Costring

{-# COMPILED getLine getLine #-}

main : IO Unit
main = 
  putStrLn (toCostring "What's your name?") &gt;&gt;= (λ _ → 
  getLine &gt;&gt;= (λ s → 
  putStr (toCostring "Hello ") &gt;&gt;= (λ _ → 
  putStrLn s)))
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>Surprise! <code>Primitive.IO</code> defines the <code>&gt;&gt;=</code> operator but not <code>&gt;&gt;</code>. Asymmetric with the regular <code>IO</code> module.</li>
<li>Native IO functions require <code>Costring</code> objects. So a string literal has to be passed to <code>toCostring</code> to be used.</li>
</ul>


<p><a id="echoinputreverse"></a></p>

<h3>EchoInputReverse</h3>

<p>Read a line from standard input. Reverse it in Agda. Write the reversed line back to the screen.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>EchoInputReverse.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module EchoInputReverse where

-- Agda standard library 0.7
open import Data.List using (reverse)
open import Data.String
open import Foreign.Haskell using (Unit)
open import IO.Primitive

postulate
  getLine : IO String

{-# COMPILED getLine getLine #-}

main : IO Unit
main = 
  getLine &gt;&gt;= (λ s → 
  return (toCostring (fromList (reverse (toList s)))) &gt;&gt;= (λ s' → 
  putStrLn s'))
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>Problem: The line from standard input is a <code>Costring</code>. I can&rsquo;t reverse it or do anything useful with it without first converting it to a <code>String</code>. But there is no function in the standard library to do this conversion, even as a runtime cast.</li>
<li>Surprise workaround: Even though the Haskell type <code>String</code> maps to the Agda type <code>Costring</code> in the general case, it is still possible to postulate that it maps directly to the Agda type <code>String</code> for certain functions where you can assert that the string won&rsquo;t be infinite.

<ul>
<li>So the Agda FFI must be capable of performing implicit coercion between the native <code>Costring</code> and <code>String</code> datatypes. This is <a href="http://wiki.portal.chalmers.se/agda/agda.php?n=Docs.FFI">not documented</a>.</li>
<li>This approach has the disadvantage that it marks the result of <code>getLine</code> as being a <em>finite</em> string when it may not in fact be. See discussion at <a href="http://stackoverflow.com/questions/21808186/reading-a-line-of-standard-input-as-a-string-instead-of-a-costring/">StackOverflow</a>.</li>
</ul>
</li>
</ul>


<p><a id="parseint"></a></p>

<h3>ParseInt</h3>

<p>Prompt the user for a number, parse it, and output it. If an invalid number was input, output zero.</p>

<div class="accordion">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" href="#">
        <span class="expand-symbol"></span>

    <code>ParseInt.agda</code>

      </a>
    </div>
    <div class="accordion-body collapse">
      <div class="accordion-inner">

    <pre><code>module ParseInt where

-- Agda standard library 0.7
open import Data.Char
open import Data.List
open import Data.Maybe
open import Data.Nat
open import Data.Nat.Show
open import Data.String
open import Foreign.Haskell using (Unit)
open import IO.Primitive

postulate
  getLine : IO String

{-# COMPILED getLine getLine #-}

parseInt : String → Maybe ℕ
parseInt s = 
  then? (unwrap (parseDigits s)) (λ s' → 
  just (digitsToℕ s'))
  where
    parseDigits : String → List (Maybe ℕ)
    parseDigits s = map toDigit (toList s) where
      toDigit : Char → Maybe ℕ
      toDigit '0' = just 0
      toDigit '1' = just 1
      toDigit '2' = just 2
      toDigit '3' = just 3
      toDigit '4' = just 4
      toDigit '5' = just 5
      toDigit '6' = just 6
      toDigit '7' = just 7
      toDigit '8' = just 8
      toDigit '9' = just 9
      toDigit _   = nothing

    -- TODO: There's probably a standard-library function that does this
    --       but I can't find it.
    unwrap : List (Maybe ℕ) → Maybe (List ℕ)
    unwrap xs = unwrap' (just []) xs where
      unwrap' : Maybe (List ℕ) → List (Maybe ℕ) → Maybe (List ℕ)
      unwrap' (just xs) (just y ∷ ys) = unwrap' (just (Data.List._++_ xs [ y ])) ys  -- makes unwrap O(N^2)!
      unwrap' (just xs) (nothing ∷ _) = nothing
      unwrap' (just xs) []            = just xs
      unwrap' nothing   _             = nothing

    -- TODO: Look for a monadic _&gt;&gt;=_ that does the same thing
    then? : {A : Set} → {B : Set} → Maybe A → (A → Maybe B) → Maybe B
    then? nothing _ = nothing
    then? (just r1) op2 = op2 r1

    digitsToℕ : List ℕ → ℕ
    digitsToℕ xs = digitsToℕ' (reverse xs) where
      digitsToℕ' : List ℕ → ℕ
      digitsToℕ' []       = 0
      digitsToℕ' (x ∷ xs) = x + (10 * (digitsToℕ' xs))

ℕ? : Maybe ℕ -&gt; ℕ
ℕ? (just x) = x
ℕ? nothing  = 0

main : IO Unit
main = 
  getLine &gt;&gt;= (λ s → 
  return (show (ℕ? (parseInt s))) &gt;&gt;= (λ s' → 
  putStrLn (toCostring s')))
</code></pre>


      </div>
    </div>
  </div>
</div>


<ul>
<li>Agda type checking errors are really hard to read:

<ul>
<li><p>Actual:</p>

<pre><code>List Char !=&lt; _A_10 s → _B_11 s of type Set
when checking that the expression toList s has type
_A_10 s → _B_11 s
</code></pre></li>
<li><p>Better:</p>

<pre><code>Expected type (A → B) but found type (List Char).
</code></pre></li>
</ul>
</li>
<li>Agda&rsquo;s <code>show</code> function that converts a natural number to a string has quadratic performance!

<ul>
<li>It takes 0.3s to print 1000, 2.2s to print 2000, 6.9s to print 3000, and 15.9s to print 4000.</li>
<li>This is crazy! It probably means that at least one of {<code>+</code>, <code>*</code>, <code>mod</code>} is not constant time. Not cool.

<ul>
<li><p>Indeed the <code>_divMod_</code> operator runs in <em>linear</em> time with respect to the magnitude of the dividend. Madness.</p></li>
</ul>
</li>
</ul>
</li>
<li>Surprise! Equality comparison between two numbers is not <code>=</code> or <code>==</code> but rather <code>≟</code>.

<ul>
<li>It doesn&rsquo;t return a <code>Bool</code> either. Instead it returns a fancy boolean called a <code>Decidable</code> with an embedded equality proof.</li>
<li>A <code>Decidable</code> can be converted to a regular boolean with the <code>⌊_⌋</code> operator. Weird.</li>
</ul>
</li>
<li>I suspect that (arbitrary precision) natural numbers from <code>Data.Nat</code> take <em>linear</em> memory to represent rather than <em>logarithmic</em>.

<ul>
<li>There is <code>Data.Bin</code> which represents natural numbers using binary, but most of the standard library doesn&rsquo;t use it.</li>
</ul>
</li>
</ul>

<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>There is another module called <code>Data.Bin</code> which provides a representation of natural numbers which uses an efficient binary representation. But most of the standard library does not use it.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I found configuring Emacs for Agda to be nontrivial. I had to learn enough Emacs Lisp to debug my <code>.emacs</code> configuration file.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>Kudos to <a href="https://github.com/liamoc/learn-you-an-agda/blob/master/pages/peano.md">Learn You an Agda > Hello, Peano</a> for helping me implement this first Agda program.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>


  </div>
  
  
  <div class="span3 block-bar">
    <div class="block">
  <h3>Topics</h3>
  
  <ul class="tag_box">
    
    
      
      
      
      
        
          
        
      
      
      <li id="Software-topic" class="active"><a href="/articles/topics/#Software">Software <sup>49</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Productivity-topic"><a href="/articles/topics/#Productivity">Productivity <sup>9</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Personal-topic"><a href="/articles/topics/#Personal">Personal <sup>8</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Offtopic-topic"><a href="/articles/topics/#Offtopic">Offtopic <sup>5</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Business-topic"><a href="/articles/topics/#Business">Business <sup>4</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Cooking-topic"><a href="/articles/topics/#Cooking">Cooking <sup>2</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Politics-topic"><a href="/articles/topics/#Politics">Politics <sup>2</sup></a></li>
    
      
      
      
      
        
      
      
      <li id="Relationships-topic"><a href="/articles/topics/#Relationships">Relationships <sup>2</sup></a></li>
    
  </ul>
  <hr style="margin: .5em 0;"/>
  <a class="subscribe" href="https://twitter.com/davidfstr">
    <img src="/assets/twitter-icon-16x16.png" alt="" width="16" height="16" />Subscribe (Twitter)
  </a>
  <a class="subscribe subscribe-last" href="feed://dafoster.net/atom.xml">
    <img src="/assets/feed-icon-14x14.png" alt="" width="14" height="14" style="padding-right: 2px;" />Subscribe (RSS)
  </a>
</div>

  </div>
  
  
  <div class="span12">
    <div class="pagination pagination-centered">
      <ul>
      
        <li class="prev"><a href="/articles/2014/02/02/what-is-color/" title="What is Color?">&larr; Previous</a></li>
      
        <li><a href="/articles/">Index</a></li>
      
        <li class="next"><a href="/articles/2014/05/10/reading-japanese-text-from-images-quickly/" title="Reading Japanese text from images">Next &rarr;</a></li>
      
      </ul>
    </div>
    
    
  </div>
</div>

        
      </div>

      <footer>
        <p>&copy; 2018 <a href="/about/">David Foster</a>
        
        </p>
      </footer>

    </div>
    
  
  
  
    <script>
      // Link each accordion toggle to its body. Required by jQuery Accordion plugin.
var accordions = $('.accordion');
for (var i = 0; i < accordions.length; i++) {
    var curAccordion = accordions[i];
    $('.accordion-toggle', curAccordion).attr('href', '#acc' + i);
    $('.accordion-body', curAccordion).attr('id', 'acc' + i);
}

// Rotate triangle symbol when accordian toggled
$('.accordion-toggle .expand-symbol').text('▸ ');
$('.accordion-toggle').click(function() {
    var accordianBodySelector = $(this).attr('href');
    var isCollapsed = $(accordianBodySelector).attr('class').indexOf("in") !== -1;
    
    if (isCollapsed) {
        $('.expand-symbol', this).text('▸ ');
    } else {
        $('.expand-symbol', this).text('▾ ');
    }
});

    </script>
  
    
  
    
  
  </body>
</html>
